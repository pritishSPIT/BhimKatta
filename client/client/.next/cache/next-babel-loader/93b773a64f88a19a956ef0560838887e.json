{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport React, { useContext } from 'react';\nimport { useRouter } from 'next/router';\nimport Link from 'next/link';\nimport formatDistanceToNowStrict from 'date-fns/formatDistanceToNowStrict';\nimport { AuthContext } from '../../../store/auth';\nimport { FetchContext } from '../../../store/fetch';\nimport Tag from '../../tag';\nimport styles from './post-summary.module.css';\n\nvar PostSummary = function PostSummary(_ref) {\n  var _authState$userInfo;\n\n  var tags = _ref.tags,\n      author = _ref.author,\n      created = _ref.created,\n      questionId = _ref.questionId,\n      answerId = _ref.answerId,\n      setQuestion = _ref.setQuestion,\n      children = _ref.children;\n\n  var _useContext = useContext(AuthContext),\n      authState = _useContext.authState,\n      isAdmin = _useContext.isAdmin;\n\n  var _useContext2 = useContext(FetchContext),\n      authAxios = _useContext2.authAxios;\n\n  var router = useRouter();\n\n  var handleDeleteComment = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res, _yield$authAxios$dele, data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              res = window.confirm('Are you sure delete your post?');\n\n              if (!res) {\n                _context.next = 7;\n                break;\n              }\n\n              _context.next = 4;\n              return authAxios[\"delete\"](answerId ? \"/answer/\".concat(questionId, \"/\").concat(answerId) : \"/question/\".concat(questionId));\n\n            case 4:\n              _yield$authAxios$dele = _context.sent;\n              data = _yield$authAxios$dele.data;\n\n              if (answerId) {\n                setQuestion(data);\n              } else {\n                router.push('/');\n              }\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleDeleteComment() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(\"div\", {\n    className: styles.postCell\n  }, __jsx(\"div\", {\n    className: styles.text\n  }, children), __jsx(\"div\", {\n    className: styles.footer\n  }, __jsx(\"div\", {\n    className: styles.row\n  }, __jsx(\"div\", {\n    className: styles.tagContainer\n  }, tags === null || tags === void 0 ? void 0 : tags.map(function (tag) {\n    return __jsx(Tag, {\n      key: tag\n    }, tag);\n  })), __jsx(\"div\", {\n    className: styles.userDetails\n  }, __jsx(Link, {\n    href: \"/users/[user]\",\n    as: \"/users/\".concat(author.username)\n  }, __jsx(\"a\", null, __jsx(\"img\", {\n    src: \"https://secure.gravatar.com/avatar/\".concat(author.id, \"?s=32&d=identicon\"),\n    alt: author.username\n  }))), __jsx(\"div\", {\n    className: styles.info\n  }, __jsx(\"span\", null, tags ? 'asked' : 'answered', ' ', formatDistanceToNowStrict(new Date(created), {\n    addSuffix: true\n  })), __jsx(Link, {\n    href: \"/users/[user]\",\n    as: \"/users/\".concat(author.username)\n  }, __jsx(\"a\", null, author.username))))), (((_authState$userInfo = authState.userInfo) === null || _authState$userInfo === void 0 ? void 0 : _authState$userInfo.id) === author.id || isAdmin()) && __jsx(\"div\", {\n    className: styles.row\n  }, __jsx(\"a\", {\n    className: styles[\"delete\"],\n    onClick: function onClick() {\n      return handleDeleteComment();\n    }\n  }, \"delete\"))));\n};\n\nexport default PostSummary;","map":null,"metadata":{},"sourceType":"module"}
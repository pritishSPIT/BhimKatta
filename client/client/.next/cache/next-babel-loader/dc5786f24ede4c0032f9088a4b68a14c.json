{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { createContext, useContext } from 'react';\nimport axios from 'axios';\nimport { AuthContext } from './auth';\nimport { baseURL } from '../util/fetcher';\nconst FetchContext = createContext();\nconst {\n  Provider\n} = FetchContext;\n\nconst FetchProvider = ({\n  children\n}) => {\n  const {\n    authState\n  } = useContext(AuthContext);\n  const authAxios = axios.create({\n    baseURL\n  });\n  authAxios.interceptors.request.use(config => {\n    config.headers.Authorization = `Bearer ${authState.token}`;\n    return config;\n  }, error => {\n    return Promise.reject(error);\n  });\n  authAxios.interceptors.response.use(response => {\n    return response;\n  }, error => {\n    const code = error && error.response ? error.response.status : 0;\n\n    if (code === 401 || code === 403) {\n      console.log('error code', code);\n    }\n\n    return Promise.reject(error);\n  });\n  return __jsx(Provider, {\n    value: {\n      authAxios\n    }\n  }, children);\n};\n\nexport { FetchContext, FetchProvider };","map":null,"metadata":{},"sourceType":"module"}
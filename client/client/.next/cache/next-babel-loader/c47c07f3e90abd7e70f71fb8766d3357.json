{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport React, { useContext } from 'react';\nimport { AuthContext } from '../../../store/auth';\nimport { FetchContext } from '../../../store/fetch';\nimport ModalContext from '../../../store/modal';\nimport Button from '../../button';\nimport { ArrowUp, ArrowDown } from '../../icons';\nimport styles from './post-vote.module.css';\n\nvar PostVote = function PostVote(_ref) {\n  var score = _ref.score,\n      votes = _ref.votes,\n      questionId = _ref.questionId,\n      answerId = _ref.answerId,\n      setQuestion = _ref.setQuestion;\n\n  var _useContext = useContext(AuthContext),\n      authState = _useContext.authState,\n      isAuthenticated = _useContext.isAuthenticated;\n\n  var _useContext2 = useContext(FetchContext),\n      authAxios = _useContext2.authAxios;\n\n  var _useContext3 = useContext(ModalContext),\n      handleComponentVisible = _useContext3.handleComponentVisible;\n\n  var isUpVoted = function isUpVoted() {\n    var _votes$find;\n\n    return ((_votes$find = votes.find(function (v) {\n      var _authState$userInfo;\n\n      return v.user === ((_authState$userInfo = authState.userInfo) === null || _authState$userInfo === void 0 ? void 0 : _authState$userInfo.id);\n    })) === null || _votes$find === void 0 ? void 0 : _votes$find.vote) === 1;\n  };\n\n  var isDownVoted = function isDownVoted() {\n    var _votes$find2;\n\n    return ((_votes$find2 = votes.find(function (v) {\n      var _authState$userInfo2;\n\n      return v.user === ((_authState$userInfo2 = authState.userInfo) === null || _authState$userInfo2 === void 0 ? void 0 : _authState$userInfo2.id);\n    })) === null || _votes$find2 === void 0 ? void 0 : _votes$find2.vote) === -1;\n  };\n\n  var upVote = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _yield$authAxios$get, data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return authAxios.get(\"/votes/upvote/\".concat(questionId, \"/\").concat(answerId ? answerId : ''));\n\n            case 2:\n              _yield$authAxios$get = _context.sent;\n              data = _yield$authAxios$get.data;\n              setQuestion(data);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function upVote() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var downVote = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var _yield$authAxios$get2, data;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return authAxios.get(\"/votes/downvote/\".concat(questionId, \"/\").concat(answerId ? answerId : ''));\n\n            case 2:\n              _yield$authAxios$get2 = _context2.sent;\n              data = _yield$authAxios$get2.data;\n              setQuestion(data);\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function downVote() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var unVote = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var _yield$authAxios$get3, data;\n\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return authAxios.get(\"/votes/unvote/\".concat(questionId, \"/\").concat(answerId ? answerId : ''));\n\n            case 2:\n              _yield$authAxios$get3 = _context3.sent;\n              data = _yield$authAxios$get3.data;\n              setQuestion(data);\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function unVote() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(\"div\", {\n    className: styles.voteCell\n  }, __jsx(Button, {\n    className: styles.voteButton,\n    onClick: function onClick() {\n      return isAuthenticated() ? isUpVoted() ? unVote() : upVote() : handleComponentVisible(true, 'signup');\n    }\n  }, __jsx(ArrowUp, {\n    className: isUpVoted() ? styles.voted : ''\n  })), __jsx(\"div\", {\n    className: styles.score\n  }, score), __jsx(Button, {\n    className: styles.voteButton,\n    onClick: function onClick() {\n      return isAuthenticated() ? isDownVoted() ? unVote() : downVote() : handleComponentVisible(true, 'signup');\n    }\n  }, __jsx(ArrowDown, {\n    className: isDownVoted() ? styles.voted : ''\n  })));\n};\n\nexport default PostVote;","map":null,"metadata":{},"sourceType":"module"}